!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).marmot={})}(this,(function(e){"use strict";
/**
     * [@uking/marmot]{@link https://github.com/An-uking/marmot.git}
     *
     * @namespace marmot
     * @version 1.0.7
     * @author uking [ptvile@live.com]
     * @copyright uking 2024
     * @license MIT
     */const n=["Template","Slot"];const t=/<([A-Z][A-Za-z0-9]*)/g,s=(e,n,t)=>{let{strings:s,values:r}=e;return s?l(s,r,n,t):""};function l(e,n,o,c){let u=e.slice(0),f="";for(c=c||{};u.length;){let e=u[0].match(t);if(e)for(let t=0;t<e.length;t++){if(u[0]=u[0].replace(/\n\s+/g,""),!u[0])continue;let g=e[t].replace("<",""),p=u[0].indexOf(e[t]);if(f+=u[0].substring(0,p),"Template"===g){u[0]=u[0].substring(p+e[t].length);let{props:s,currentIndex:f,endTagPosition:g}=i(u,n);u[f]=u[f].substring(g+1),u.splice(0,f),n.splice(0,f);let a="</Template>",{index:d,offset:h,length:m}=r(a,u),b=u.slice(0,d+1),x=n.slice(0,d);b[d]=b[d].substring(0,h),c[s.slot]=l(b,x,o,c),u[d]=u[d].substring(h+a.length),u.splice(0,d),n.splice(0,d),t+=m}else if("Slot"===g){let s=p+e[t].length;u[0]=u[0].substring(s);let{props:l,currentIndex:r,endTagPosition:o}=i(u,n);l.name?(f+=c[l.name]||"",c[l.name]=""):(f+=c.default||"",c.default=""),u[r]=u[r].substring(o+2),u.splice(0,r),n.splice(0,r)}else{let a=o[g];if(!a)throw new Error(`Component ${g} not found.`);u[0]=u[0].substring(p+e[t].length);let{props:d,currentIndex:h,endTagPosition:m,isCloseTag:b}=i(u,n);if(b){let e=new a;f+=s(e.render(d),e.components(),c),u[0]=u[0].substring(m+2)}else{u[h]=u[h].substring(m+1),u.splice(0,h),n.splice(0,h);let e=`</${g}>`,{index:i,offset:p,length:b}=r(e,u),x=u.slice(0,i+1),T=n.slice(0,i);x[i]=x[i].substring(0,p),c.default=l(x,T,o,c);let w=new a;f+=s(w.render(d),w.components(),c),u[i]=u[i].substring(p+e.length),u.splice(0,i),n.splice(0,i),t+=b}}}else u[0]=u[0].replace(/\n\s+/g,""),f+=u[0],u.splice(0,1),n[0]&&(Array.isArray(n[0])?f+=n[0].join(""):f+=n[0],n.splice(0,1))}return f}function r(e,n){let s=n.length,l="</Template>"===e,r=[],i=-1,o=0,c=-1;for(let u=0;u<s;u++){let s=n[u];i=s.indexOf(e);let f=i>-1,g=s;if(f&&(c=u,g=s.substring(0,i)),l){let e=g.match(t);e&&(r.push(...e),o=r.length)}if(f)break}return{index:c,offset:i,length:o}}function i(e,n){const t=e.length;let s={},l=-1,r=-1,i=!1;for(let f=0;f<t;f++){let t=e[f].replace(/\n\s+/g,""),g=new RegExp("(/)?>","g").exec(t);if(g){i="/>"===g[0];let e=g.index;t=t.substring(0,e),s=u(t,s),s=o(t,s),l=f,r=g.index;break}{s=u(t,s),s=o(t,s);let e=c(t);e&&!s[e]&&(s[e]=n[f])}}return{props:s,currentIndex:l,endTagPosition:r,isCloseTag:i}}function o(e,n={}){const t=/([\w-]+)\s*=\s*(['"])(.*?)\2/g;let s;for(;s=t.exec(e);){const[,e,,t]=s;n[e]=t}return n}function c(e){let n=/([\w-]+)\s*=['"]$/g.exec(e);return n?n[1]:null}function u(e,n={}){const t=/(^|\s)(\w+)(?=\s|$)/g;let s;for(;s=t.exec(e);){const[,,e]=s;n[e]=!0}return n}e.Component=class{constructor(e){this.props=e;let t=this.constructor.name;if(n.includes(t))throw new Error(`Component ${t} is a reserved keyword and cannot be used as a component name.`)}components(){}render(e={}){}},e.html=(e,...n)=>({strings:e,values:n}),e.render=s}));
