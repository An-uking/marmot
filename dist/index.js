!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).marmot={})}(this,(function(e){"use strict";
/**
     * [@uking/marmot]{@link https://github.com/An-uking/marmot.git}
     *
     * @namespace marmot
     * @version 1.0.7
     * @author uking [ptvile@live.com]
     * @copyright uking 2024
     * @license MIT
     */const n=["Template","Slot"];const t=/<([A-Z][A-Za-z0-9]*)/g,s=(e,n,t)=>{let{strings:s,values:i}=e;return s?l(s,i,n,t):""};function l(e,n,o,c){let u=e.slice(0),p="";for(c=c||{};u.length;){let e=u[0].match(t);if(e)for(let t=0;t<e.length;t++){if(u[0]=u[0].replace(/\n\s+/g,""),!u[0])continue;let f=e[t].replace("<",""),g=u[0].indexOf(e[t]);if(p+=u[0].substring(0,g),"Template"===f){u[0]=u[0].substring(g+e[t].length);let{props:s,currentIndex:p,endTagPosition:f}=r(u,n);u[p]=u[p].substring(f+1),u.splice(0,p),n.splice(0,p);let a="</Template>",{index:d,offset:h,length:m}=i(a,u),b=u.slice(0,d+1),x=n.slice(0,d);b[d]=b[d].substring(0,h),c[s.slot]=l(b,x,o,c),u[d]=u[d].substring(h+a.length),u.splice(0,d),n.splice(0,d),t+=m}else if("Slot"===f){let s=g+e[t].length;u[0]=u[0].substring(s);let{props:l,currentIndex:i,endTagPosition:o}=r(u,n);l.name?(p+=c[l.name]||"",c[l.name]=""):(p+=c.default||"",c.default=""),u[i]=u[i].substring(o+2),u.splice(0,i),n.splice(0,i)}else{let a=o[f];if(!a)throw new Error(`Component ${f} not found.`);u[0]=u[0].substring(g+e[t].length);let{props:d,currentIndex:h,endTagPosition:m,isCloseTag:b}=r(u,n);if(b){let e=new a;p+=s(e.render(d),e.components(),c),u[h]=u[h].substring(m+2),u.splice(0,h),n.splice(0,h)}else{u[h]=u[h].substring(m+1),u.splice(0,h),n.splice(0,h);let e=`</${f}>`,{index:r,offset:g,length:b}=i(e,u),x=u.slice(0,r+1),T=n.slice(0,r);x[r]=x[r].substring(0,g),c.default=l(x,T,o,c);let w=new a;p+=s(w.render(d),w.components(),c),u[r]=u[r].substring(g+e.length),u.splice(0,r),n.splice(0,r),t+=b}}}else u[0]=u[0].replace(/\n\s+/g,""),p+=u[0],u.splice(0,1),n[0]&&(Array.isArray(n[0])?p+=n[0].join(""):p+=n[0],n.splice(0,1))}return p}function i(e,n){let s=n.length,l="</Template>"===e,i=[],r=-1,o=0,c=-1;for(let u=0;u<s;u++){let s=n[u];r=s.indexOf(e);let p=r>-1,f=s;if(p&&(c=u,f=s.substring(0,r)),l){let e=f.match(t);e&&(i.push(...e),o=i.length)}if(p)break}return{index:c,offset:r,length:o}}function r(e,n){const t=e.length;let s={},l=-1,i=-1,r=!1;for(let p=0;p<t;p++){let t=e[p].replace(/\n\s+/g,""),f=new RegExp("(/)?>","g").exec(t);if(f){r="/>"===f[0];let e=f.index;t=t.substring(0,e),s=u(t,s),s=o(t,s),l=p,i=f.index;break}{s=u(t,s),s=o(t,s);let e=c(t);e&&!s[e]&&(s[e]=n[p])}}return{props:s,currentIndex:l,endTagPosition:i,isCloseTag:r}}function o(e,n={}){const t=/([\w-]+)\s*=\s*(['"])(.*?)\2/g;let s;for(;s=t.exec(e);){const[,e,,t]=s;n[e]=t}return n}function c(e){let n=/([\w-]+)\s*=['"]$/g.exec(e);return n?n[1]:null}function u(e,n={}){const t=/(^|\s)(\w+)(?=\s|$)/g;let s;for(;s=t.exec(e);){const[,,e]=s;n[e]=!0}return n}e.Component=class{constructor(e){this.props=e;let t=this.constructor.name;if(n.includes(t))throw new Error(`Component ${t} is a reserved keyword and cannot be used as a component name.`)}components(){}render(e={}){}},e.html=(e,...n)=>({strings:e,values:n}),e.render=s}));
