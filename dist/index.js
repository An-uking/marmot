!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).marmot=t()}(this,(function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}
/**
	 * [@uking/marmot]{@link https://github.com/An-uking/marmot.git}
	 *
	 * @namespace marmot
	 * @version 1.0.9
	 * @author uking [ptvile@live.com]
	 * @copyright uking 2024
	 * @license MIT
	 */const t=["Template","Slot"];const n=/<([A-Z][A-Za-z0-9]*)/g,o=(e,t,n)=>{let{strings:o,values:r}=e;return o?s(o,r,t,n):""};function s(e,t,i,c){let f=e.slice(0),u="";for(c=c||{};f.length;){let e=f[0].match(n);if(e)for(let n=0;n<e.length;n++){if(f[0]=f[0].replace(/\n\s+/g,""),!f[0])continue;let a=e[n].replace("<",""),p=f[0].indexOf(e[n]);u+=f[0].substring(0,p),f[0]=f[0].substring(p+e[n].length);let d=-1,{props:g,currentIndex:m,endTagPosition:h,isCloseTag:x}=l(f,t);if(x){if(d=h+2,"Slot"===a)g.name?(u+=c[g.name]||"",c[g.name]=""):(u+=c.default||"",c.default="");else{let e=i[a];if(!e)throw new Error(`Component ${a} not found.`);let t=new e;u+=o(t.render(g),t.components(),c)}}else{f[m]=f[m].substring(h+1),f.splice(0,m),t.splice(0,m);let e=`</${a}>`,{index:l,offset:p,length:x}=r(e,f),b=f.slice(0,l+1),w=t.slice(0,l);b[l]=b[l].substring(0,p),m=l,d=p+e.length;let y="Template"===a;if(c[g.slot||"default"]=s(b,w,i,c),!y){let e=i[a];if(!e)throw new Error(`Component ${a} not found.`);let t=new e;u+=o(t.render(g),t.components(),c)}n+=x}f[m]=f[m].substring(d),f.splice(0,m),t.splice(0,m)}else f[0]=f[0].replace(/\n\s+/g,""),u+=f[0],f.splice(0,1),t[0]&&(Array.isArray(t[0])?u+=t[0].join(""):u+=t[0],t.splice(0,1))}return u}function r(e,t){let o=t.length,s="</Template>"===e,r=[],l=-1,i=0,c=-1;for(let f=0;f<o;f++){let o=t[f];l=o.indexOf(e);let u=l>-1,a=o;if(u&&(c=f,a=o.substring(0,l)),s){let e=a.match(n);e&&(r.push(...e),i=r.length)}if(u)break}return{index:c,offset:l,length:i}}function l(e,t){const n=e.length;let o={},s=-1,r=-1,l=!1;for(let u=0;u<n;u++){let n=e[u].replace(/\n\s+/g,""),a=new RegExp("(/)?>","g").exec(n);if(a){l="/>"===a[0];let e=a.index;n=n.substring(0,e),o=f(n,o),o=i(n,o),s=u,r=a.index;break}{o=f(n,o),o=i(n,o);let e=c(n);e&&!o[e]&&(o[e]=t[u])}}return{props:o,currentIndex:s,endTagPosition:r,isCloseTag:l}}function i(e,t={}){const n=/([\w-]+)\s*=\s*(['"])(.*?)\2/g;let o;for(;o=n.exec(e);){const[,e,,n]=o;t[e]=n}return t}function c(e){let t=/([\w-]+)\s*=['"]$/g.exec(e);return t?t[1]:null}function f(e,t={}){const n=/(^|\s)(\w+)(?=\s|$)/g;let o;for(;o=n.exec(e);){const[,,e]=o;t[e]=!0}return t}return e({render:o,Component:class{constructor(e){this.props=e;let n=this.constructor.name;if(t.includes(n))throw new Error(`Component ${n} is a reserved keyword and cannot be used as a component name.`)}components(){}render(e={}){}},html:(e,...t)=>({strings:e,values:t})})}));
