!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).marmot=t()}(this,(function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}
/**
	 * [@uking/marmot]{@link https://github.com/An-uking/marmot.git}
	 *
	 * @namespace marmot
	 * @version 1.1.0
	 * @author uking [ptvile@live.com]
	 * @copyright uking 2024
	 * @license MIT
	 */const t=/<([A-Z]\w*)/g,n=(e,t,n)=>{let{strings:s,values:l}=e;return s?r(s,l,t,n):""};function r(e,n,i,c){let u=e.slice(0);e=[];let f="";for(i=i||{},c=c||{};u.length;){let e=u[0].match(t);if(e)for(let t=0;t<e.length;t++){if(u[0]=u[0].replace(/\n\s+/g,""),!u[0])continue;let a=e[t].replace("<",""),p=u[0].indexOf(e[t]);f+=u[0].substring(0,p),u[0]=u[0].substring(p+e[t].length);let d=-1,{props:g,currentIndex:h,endTagPosition:m,isCloseTag:x}=o(u,n);if(x)d=m+2,"Slot"===a?g.name?(f+=c[g.name]||"",c[g.name]=""):(f+=c.default||"",c.default=""):f+=s(a,i,g,c);else{u[h]=u[h].substring(m+1),u.splice(0,h),n.splice(0,h);let e=`</${a}>`,{index:o,offset:p,length:x}=l(e,u),b=u.slice(0,o+1),w=n.slice(0,o);b[o]=b[o].substring(0,p),h=o,d=p+e.length,c[g.slot||"default"]=r(b,w,i,c),"Template"!==a&&(f+=s(a,i,g,c)),t+=x}u[h]=u[h].substring(d),u.splice(0,h),n.splice(0,h)}else u[0]=u[0].replace(/\n\s+/g,""),f+=u[0],n[0]&&(Array.isArray(n[0])?f+=n[0].join(""):f+=n[0]),u.splice(0,1),n.splice(0,1)}return f}function s(e,t,r,s){let l=t[e];if(!l)throw new Error(`Component ${e} not found.`);let o=new l;return n(o.render(r),o.components(),s)}function l(e,n){let r=n.length,s="</Template>"===e,l=[],o=-1,i=0,c=-1;for(let u=0;u<r;u++){let r=n[u];o=r.indexOf(e);let f=o>-1,a=r;if(f&&(c=u,a=r.substring(0,o)),s){let e=a.match(t);e&&(l.push(...e),i=l.length)}if(f)break}return{index:c,offset:o,length:i}}function o(e,t){const n=e.length;let r={},s=-1,l=-1,o=!1;for(let f=0;f<n;f++){let n=e[f].replace(/\n\s+/g,""),a=new RegExp("(/)?>","g").exec(n);if(a){o="/>"===a[0];let e=a.index;n=n.substring(0,e),r=u(n,r),r=i(n,r),s=f,l=a.index;break}{r=u(n,r),r=i(n,r);let e=c(n);e&&!r[e]&&(r[e]=t[f])}}return{props:r,currentIndex:s,endTagPosition:l,isCloseTag:o}}function i(e,t={}){const n=/([\w-]+)\s*=\s*(['"])(.*?)\2/g;let r;for(;r=n.exec(e);){const[,e,,n]=r;t[e]=n}return t}function c(e){let t=/([\w-]+)\s*=['"]$/g.exec(e);return t?t[1]:null}function u(e,t={}){const n=/(^|\s)(\w+)(?=\s|$)/g;let r;for(;r=n.exec(e);){const[,,e]=r;t[e]=!0}return t}return e({render:n,Component:class{constructor(e){this.props=e;let t=this.constructor.name;if(["Template","Slot"].includes(t))throw new Error(`Component ${t} is a reserved keyword.`)}components(){}render(e={}){}},html:(e,...t)=>({strings:e,values:t})})}));
